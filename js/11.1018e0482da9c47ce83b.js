webpackJsonp([11,19,30],{1276:function(t,e,a){var n=a(626)(a(1320),a(1321),null,null);t.exports=n.exports},1294:function(t,e,a){var n=a(626)(a(1370),a(1382),null,null);t.exports=n.exports},1300:function(t,e,a){var n=a(626)(a(1390),a(1411),null,null);t.exports=n.exports},1320:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(321),o=a.n(n);e.default={name:"admin-form-textarea",props:{value:{type:String,required:!0},label:{type:String,required:!0}},data:function(){return{rows:3,text:"",showPreview:!1}},computed:{preview:function(){return o()(this.text,{sanitize:!0})}},methods:{update:function(t){this.$emit("input",t.target.value)}},created:function(){this.text=this.value}}},1321:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row medium-gutter"},[a("div",{staticClass:"auto"},[a("div",{staticClass:"stacked-label"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"full-width",attrs:{rows:t.rows},domProps:{value:t.text},on:{focus:function(e){t.rows=10},blur:function(e){t.rows=3},input:[function(e){e.target.composing||(t.text=e.target.value)},t.update]}}),t._v(" "),a("label",[t._v(t._s(t.label))]),t._v(" "),a("small",{domProps:{innerHTML:t._s(t.$t("markdown_description"))}})])]),t._v(" "),t.showPreview?a("div",{staticClass:"width-1of2 self-stretch",staticStyle:{"max-height":"250px",overflow:"auto"}},[a("div",{domProps:{innerHTML:t._s(t.preview)}})]):t._e(),t._v(" "),a("div",{staticClass:"self-start"},[a("button",{staticClass:"primary small",on:{click:function(e){t.showPreview=!t.showPreview}}},[a("i",[t._v("visibility")]),t._v(" "),a("q-tooltip",[t._v(t._s(t.$t("preview")))])],1)])])},staticRenderFns:[]}},1353:function(t,e,a){"use strict";var n=a(169),o=a.n(n),s=a(168),i=a.n(s);e.a={methods:{confirmDeleteLocation:function(t){this.journey.hasLocation(t._id)&&this.$root.$deleteDialog(t.name,{location:t},this.deleteItemLocation)},deleteItemLocation:function(t){var e=this;return i()(o.a.mark(function a(){var n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=t.location._id,t.location.remove().then(function(){e.journey.deleteLocation(n).save(),"function"==typeof e.loadLocations&&e.loadLocations()}).then(function(){e.$root.$toastSuccess(e.$t("delete_item_successfully")),"function"==typeof e.deleteItemLocationSuccess&&e.deleteItemLocationSuccess()}).catch(function(t){e.$root.$toastError(t.message)});case 2:case"end":return a.stop()}},a,e)}))()}}}},1362:function(t,e,a){"use strict";var n=a(169),o=a.n(n),s=a(168),i=a.n(s),r=a(320);e.a={data:function(){return{journey:{},notFound:!1,isEdit:!1}},methods:{loadJourney:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i()(o.a.mark(function n(){var s;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a();case 2:if(s=n.sent,!t){n.next=14;break}return n.next=6,s.journey.findById(t);case 6:if(e.journey=n.sent,null!==e.journey){n.next=10;break}return e.notFound=!0,n.abrupt("return");case 10:a&&(e.journey=s.journey.getNewInstance(e.journey.getCloneData())),e.isEdit=!0,n.next=15;break;case 14:e.journey=s.journey.getNewInstance();case 15:case"end":return n.stop()}},n,e)}))()}}}},1370:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(169),o=a.n(n),s=a(168),i=a.n(s),r=a(1353);e.default={name:"admin-journeys-locations-list",mixins:[r.a],props:{journey:{type:Object,required:!0}},data:function(){return{locations:[]}},methods:{loadLocations:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.journey.locations_;case 2:t.locations=e.sent;case 3:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.loadLocations()}}},1382:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-content"},[a("div",{staticClass:"list"},[t._l(t.locations,function(e,n){return a("div",{staticClass:"item item-delimiter"},[a("div",{staticClass:"toolbar inverted text-primary"},[a("i",{staticClass:"item-primary"},[t._v("location_city")]),t._v(" "),a("q-toolbar-title",{attrs:{padding:1}},[t._v(t._s(e.name))]),t._v(" "),a("router-link",{staticClass:"primary text-white small",attrs:{to:{name:"admin_journeys_location",params:{journey:t.journey._id,location:e._id}},tag:"button"}},[a("i",[t._v("edit")]),t._v(" "),a("q-tooltip",[t._v(t._s(t.$t("detail_view")))])],1),t._v(" "),a("button",{staticClass:"negative text-white small",on:{click:function(a){a.preventDefault(),t.confirmDeleteLocation(e)}}},[a("i",[t._v("delete")]),t._v(" "),a("q-tooltip",[t._v(t._s(t.$t("delete_item")))])],1)],1)])}),t._v(" "),a("router-link",{staticClass:"primary block bg-blue-6 full-width text-center text-white no-padding",attrs:{to:{name:"admin_journeys_location",params:{journey:t.journey._id}},tag:"button"}},[a("i",[t._v("add")]),t._v(" "+t._s(t.$t("location_add")))])],2)])},staticRenderFns:[]}},1390:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(169),o=a.n(n),s=a(168),i=a.n(s),r=a(1294),u=a.n(r),c=a(1276),l=a.n(c),d=a(1362);e.default={name:"admin-journeys-detail",mixins:[d.a],components:{Locations:u.a,FormTextarea:l.a},data:function(){return{init:!1,showBasic:!0,showLocations:!1}},computed:{title:function(){return this.$route.params.journey?this.isCopy?this.$t("journey_copy"):this.$t("journey_edit"):this.$t("journey_add")},languages:function(){return[{label:this.$t("english"),value:"en_US"},{label:this.$t("german"),value:"de_DE"}]},isCopy:function(){return"admin_journeys_copy"===this.$route.name}},methods:{setStartDate:function(t){this.journey.startDate=t},setEndDate:function(t){this.journey.endDate=t},save:function(){var t=this;this.journey.save().then(function(){t.$root.$toastSuccess(t.$t("item_saved_successfully")),t.$route.params.journey&&!t.isCopy||t.$router.push({name:"admin_journeys_detail",params:{journey:t.journey._id}})}).catch(function(e){t.$root.$toastError(e.message)})},copy:function(){this.$router.push({name:"admin_journeys_copy",params:{journey:this.$route.params.journey}})}},watch:{$route:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.init=!1,e.next=3,t.loadJourney(t.$route.params.journey,t.isCopy);case 3:t.init=!0;case 4:case"end":return e.stop()}},e,t)}))()}},mounted:function(){var t=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadJourney(t.$route.params.journey,t.isCopy);case 2:t.init=!0;case 3:case"end":return e.stop()}},e,t)}))()}}},1411:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.init?t.notFound?a("div",{staticClass:"card bg-negative text-white"},[a("div",{staticClass:"card-content"},[t._v("\n            "+t._s(t.$t("item_not_found"))+"\n        ")])]):a("div",{staticClass:"card"},[a("div",{staticClass:"toolbar"},[t.isEdit?a("button",{staticClass:"circular small",on:{click:function(e){e.preventDefault(),t.showBasic=!t.showBasic,t.showLocations=!1}}},[t.showBasic?a("i",[t._v("keyboard_arrow_down")]):a("i",[t._v("keyboard_arrow_up")])]):t._e(),t._v(" "),a("q-toolbar-title",{attrs:{padding:1}},[t._v(t._s(t.title))]),t._v(" "),t.$route.params.journey&&!t.isCopy?a("button",{staticClass:"primary",on:{click:function(e){t.copy()}}},[a("i",[t._v("content_copy")]),t._v(" "+t._s(t.$t("copy")))]):t._e()],1),t._v(" "),a("q-transition",{attrs:{name:"slide"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showBasic,expression:"showBasic"}]},[a("div",{staticClass:"card-content"},[a("q-select",{staticClass:"block h-form-field-margin-bottom",attrs:{label:t.$t("language"),type:"list",options:t.languages},model:{value:t.journey.lang,callback:function(e){t.journey.lang=e},expression:"journey.lang"}}),t._v(" "),a("div",{staticClass:"stacked-label h-form-field-margin-bottom"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.journey.title,expression:"journey.title"}],staticClass:"full-width",domProps:{value:t.journey.title},on:{input:function(e){e.target.composing||(t.journey.title=e.target.value)}}}),t._v(" "),a("label",[t._v(t._s(t.$t("title")))])]),t._v(" "),a("form-textarea",{attrs:{label:t.$t("short_teaser")},model:{value:t.journey.shortTeaser,callback:function(e){t.journey.shortTeaser=e},expression:"journey.shortTeaser"}}),t._v(" "),a("form-textarea",{attrs:{label:t.$t("long_teaser")},model:{value:t.journey.longTeaser,callback:function(e){t.journey.longTeaser=e},expression:"journey.longTeaser"}}),t._v(" "),a("form-textarea",{attrs:{label:t.$t("description")},model:{value:t.journey.description,callback:function(e){t.journey.description=e},expression:"journey.description"}}),t._v(" "),a("div",{staticClass:"row"},[a("q-datetime",{staticClass:"auto full-width h-form-field-margin-bottom",attrs:{label:t.$t("start_date"),type:"date"},model:{value:t.journey.startDate,callback:function(e){t.journey.startDate=e},expression:"journey.startDate"}}),t._v(" "),a("q-datetime",{staticClass:"auto full-width h-form-field-margin-bottom",attrs:{label:t.$t("end_date"),type:"date"},model:{value:t.journey.endDate,callback:function(e){t.journey.endDate=e},expression:"journey.endDate"}})],1),t._v(" "),a("div",{staticClass:"row medium-gutter"},[a("div",{staticClass:"auto"},[a("div",{staticClass:"stacked-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.journey.image,expression:"journey.image"}],staticClass:"full-width",attrs:{type:"url"},domProps:{value:t.journey.image},on:{input:function(e){e.target.composing||(t.journey.image=e.target.value)}}}),t._v(" "),a("label",[t._v(t._s(t.$t("image")))])])]),t._v(" "),t.journey.image?a("div",{staticClass:"maximized self-end"},[a("button",{staticClass:"primary small",on:{click:function(e){t.$refs.image.open()}}},[a("i",[t._v("visibility")]),t._v(" "),a("q-tooltip",[t._v(t._s(t.$t("preview")))])],1)]):t._e()]),t._v(" "),t.journey.image?a("q-modal",{ref:"image",attrs:{"content-css":{maxWidth:"500px",maxHeight:"500px"}}},[a("img",{staticClass:"responsive",attrs:{src:t.journey.image}})]):t._e(),t._v(" "),a("label",{staticClass:"block h-form-field-margin-bottom"},[a("q-toggle",{model:{value:t.journey.published,callback:function(e){t.journey.published=e},expression:"journey.published"}}),t._v(" "+t._s(t.$t("published"))+"\n                    ")],1)],1),t._v(" "),a("div",{staticClass:"card-actions"},[a("div",{staticClass:"auto"}),t._v(" "),a("div",[a("button",{staticClass:"primary",on:{click:function(e){e.preventDefault(),t.save(e)}}},[a("i",{staticClass:"on-left"},[t._v("save")]),t._v(" "+t._s(t.$t("save"))+"\n                        ")])])])])]),t._v(" "),t.isEdit&&!t.isCopy?a("div",{staticClass:"toolbar"},[a("button",{staticClass:"primary",on:{click:function(e){e.preventDefault(),t.showBasic=!1,t.showLocations=!0}}},[a("i",{staticClass:"on-left"},[t._v("location_on")]),t._v(" "+t._s(t.$t("locations"))+"\n            ")])]):t._e(),t._v(" "),a("q-transition",{attrs:{name:"slide"}},[t.isEdit&&!t.isCopy&&t.showLocations?a("locations",{attrs:{journey:t.journey}}):t._e()],1)],1):a("q-progress",{staticClass:"indeterminate stripe",staticStyle:{height:"45px"}})],1)},staticRenderFns:[]}}});